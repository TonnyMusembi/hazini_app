{"version":3,"file":"index-baf831ec.js","sources":["../../../../components/TheRoles.vue","../../../../pages/permissions/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useAuthStore } from \"../stores/login\";\nimport { useRoleStore } from \"../stores/roles\";\nimport { usePermissionStore } from \"../stores/permissions\";\nimport { storeToRefs } from \"pinia\";\nimport { Role } from \"~~/server/src/role\";\nimport { useDialogStore } from \"../stores/dialogs\";\nimport { filterActiveRoles, filterInactiveRoles } from \"@/utils/roles\";\n\nconst { openEditPermissionDialog } = useDialogStore();\n\nconst { user } = storeToRefs(useAuthStore());\nconst { selectedRole } = storeToRefs(useRoleStore());\nconst { setSelectedRole, setEditRoleIntention, setRefreshRolesFunction } =\n  useRoleStore();\nconst { setSelectedPermission } = usePermissionStore();\n\nconst pageSize = ref(10);\nconst pageID = ref(1);\nconst {\n  data: roles,\n  pending,\n  error,\n  refresh,\n} = await useFetch(\"/api/roles/list\", {\n  query: {\n    accessToken: user.value.refresh_token,\n    pageID: pageID.value,\n    pageSize: pageSize.value,\n  },\n});\nrefresh();\n\nconst selectRole = (role: Role) => {\n  setSelectedRole(role);\n  if (selectedRole.value != null) {\n    setSelectedPermission(selectedRole.value.permission);\n  }\n};\n\n\nconst activeRoles = () => {\n  //   if (roles.value != null) {\n  //     return roles.value.filter((role: Role) => role.status > 0);\n  //   }\n  //   return [];\n  return filterActiveRoles(roles.value);\n};\nconst inactiveRoles = () => {\n  //   if (roles.value != null) {\n  //     return roles.value.filter((role: Role) => role.status === 0);\n  //   }\n  //   return [];\n  return filterInactiveRoles(roles.value);\n};\n\nconst openEditPermission = (editIsToActivate: boolean) => {\n  setEditRoleIntention(editIsToActivate);\n  openEditPermissionDialog();\n};\n\nsetRefreshRolesFunction(refresh);\n</script>\n<template>\n  <div class=\"shadow-md\">\n    <div class=\"overflow-x-auto\">\n      <div class=\"w-full text-sm text-left text-gray-500\">\n        <div\n          class=\"flex justify-between w-full text-sm font-bold text-left text-gray-500 px-6 py-3 tracking-wide\"\n        >\n          <div class=\"\">Roles</div>\n        </div>\n        <div class=\"px-6 text-sm py-3 text-gray-900 font-semibold\">Active</div>\n        <div\n          v-for=\"role in activeRoles()\"\n          :key=\"role.id\"\n          class=\"bg-white hover:bg-teal-100 cursor-pointer columns-3 px-6 py-2 font-medium\"\n          :class=\"{ 'bg-teal-100': role.id === selectedRole?.id }\"\n          @click=\"selectRole(role)\"\n        >\n          <div class=\"w-ful whitespace-nowrap\">\n            {{ role.name }}\n          </div>\n          <div class=\"w-full flex justify-end whitespace-nowrap text-teal-700\">\n            <NuxtLink to=\"/roles/update\"> Edit </NuxtLink>\n          </div>\n          <div\n            @click=\"openEditPermission(false)\"\n            class=\"w-full flex justify-end text-red-400\"\n          >\n            Deactivate\n          </div>\n        </div>\n        <div class=\"px-6 text-sm py-6 text-gray-900 font-semibold\">\n          Deactivated\n        </div>\n        <div\n          v-for=\"role in inactiveRoles()\"\n          :key=\"role.id\"\n          class=\"bg-white hover:bg-teal-100 cursor-pointer columns-2 px-6 py-2 font-medium\"\n          :class=\"{ 'bg-teal-100': role.id === selectedRole?.id }\"\n          @click=\"selectRole(role)\"\n        >\n          <div class=\"w-ful whitespace-nowrap\">{{ role.name }}</div>\n\n          <div\n            @click=\"openEditPermission(true)\"\n            class=\"w-full flex justify-end text-teal-700\"\n          >\n            Activate\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","<script lang=\"ts\" setup>\nimport { useDialogStore } from \"../../stores/dialogs\";\n\nconst showButtons = ref(false);\nconst toggleButtons = () => {\n  showButtons.value = !showButtons.value;\n};\nconst { openAddResourcesDialog } = useDialogStore();\n</script>\n\n<template>\n  <div class=\"flex h-[35rem] space-x-10\">\n    <TheRoles class=\"w-1/3\" /> <ThePermissionsByRole class=\"w-2/3\" />\n  </div>\n\n  <div class=\"relative block\" v-if=\"showButtons\">\n    <div\n      @click=\"openAddResourcesDialog\"\n      class=\"cursor-pointer hover:bg-teal-900 hover:border-separate hover:border-gray-600 rounded-full absolute bottom-0 right-5 z-50 flex justify-center text-white items-center bg-teal-600 h-12 w-12 p-5 shadow-xl\"\n    >\n      +\n    </div>\n    <NuxtLink to=\"/roles/add\">\n      <div\n        class=\"cursor-pointer hover:bg-teal-900 hover:border-separate hover:border-gray-600 rounded-full absolute -bottom-14 right-5 z-50 flex justify-center text-white items-center bg-teal-500 h-12 w-12 p-5 shadow-xl\"\n      >\n        +\n      </div>\n    </NuxtLink>\n  </div>\n  <div\n    @click=\"toggleButtons\"\n    class=\"cursor-pointer hover:bg-teal-500 hover:border-separate hover:border-gray-600 rounded-full absolute bottom-10 right-8 z-50 flex justify-center text-white items-center bg-teal-900 h-12 w-12 p-5 shadow-xl\"\n  >\n    >\n  </div>\n</template>\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,mBAAA;AAEA,UAAA,EAAA,KAAA,IAAA,YAAA,aAAA,CAAA;AACA,UAAA,EAAA,aAAA,IAAA,YAAA,aAAA,CAAA;AACA,UAAA,EAAA,iBAAA,sBAAA,wBAAA,IAAA,aAAA;AAEA,uBAAA;AAEA,UAAA,WAAA,IAAA,EAAA;AACA,UAAA,SAAA,IAAA,CAAA;AACA,UAAA;AAAA,MAAM,MAAA;AAAA,MACE;AAAA,MACN;AAAA,MACA;AAAA,IACA,KAAA,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAA,mBAAA;AAAA,MACoC,OAAA;AAAA,QAC7B,aAAA,KAAA,MAAA;AAAA,QACmB,QAAA,OAAA;AAAA,QACT,UAAA,SAAA;AAAA,MACI;AAAA,IACrB,GAAA,aAAA,CAAA,GAAA,SAAA,MAAA,QAAA,UAAA,GAAA;AAEF;AAUA,UAAA,cAAA,MAAA;AAKE,aAAA,kBAAA,MAAA,KAAA;AAAA,IAAoC;AAEtC,UAAA,gBAAA,MAAA;AAKE,aAAA,oBAAA,MAAA,KAAA;AAAA,IAAsC;AAQxC,4BAAA,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1DA,UAAA,cAAA,IAAA,KAAA;AAIA,mBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}