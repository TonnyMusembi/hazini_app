import{_ as F}from"./Spin.c43bcd68.js";import{i as K,f as M,s as q,r as i,o as w,b as S,h as t,t as r,u as e,y as p,K as b,A as u,J as x,E as B,z as T,c as V,x as R,L as D,a as z}from"./entry.d9247041.js";import{a as I,u as $}from"./login.c95085de.js";import{f as _,g as m}from"./errors.1471274f.js";const N=K("create-company-store",{state:()=>({pending:!1,responseOK:!1,nonFieldErrors:"",fieldErrors:null}),actions:{async createCompany(E,y){try{this.pending=!0;let l="",v=null,s=!1;this.responseOK=s;const{data:C}=await I("/api/company/create",{method:"post",body:{body:E,accessToken:y},async onResponse({request:P,response:a,options:f}){a.ok&&(s=!0)},async onResponseError({request:P,response:a,options:f}){var d,c;a.status==400&&(v=(d=a._data)==null?void 0:d.data.errors),a.status==401&&(l="Unauthorised"),a.status===403&&(l=(c=a._data)==null?void 0:c.data.error),a.status===500&&(l="Internal Error")}},"$4jnnDIvr5l");this.pending=!1,this.fieldErrors=v,this.nonFieldErrors=l,this.responseOK=s}catch{this.pending=!1}}}}),j={class:"shadow-md p-3 bg-white"},H={class:"text-red-500 mb-6"},J=["onSubmit"],G={class:"mb-3"},Q=t("label",{for:"name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Name",-1),W={class:"text-red-500 mb-6 text-sm"},X={class:"mb-3"},Y=t("label",{for:"physical-address",class:"block text-sm font-semibold leading-6 text-gray-900"},"Physical Address",-1),Z={class:"text-red-500 mb-6 text-sm"},ee={class:"mb-3"},te=t("label",{for:"number-of-employees",class:"block text-sm font-semibold leading-6 text-gray-900"},"Number of Employees",-1),se={class:"text-red-500 mb-6 text-sm"},oe={class:"mb-3"},ae=t("label",{for:"max-loan-percent",class:"block text-sm font-semibold leading-6 text-gray-900"},"Max percent of loan amount that can be taken as loan",-1),ne={class:"text-red-500 mb-6 text-sm"},re={class:"mb-3"},le=t("label",{for:"profit-share-percent",class:"block text-sm font-semibold leading-6 text-gray-900"},"Percentage of interest retained by this company",-1),ie={class:"text-red-500 mb-6 text-sm"},de={class:"mb-3"},ce=t("label",{for:"loan-period",class:"block text-sm font-semibold leading-6 text-gray-900"},"Period employees are allowed to request loan",-1),pe={class:"text-red-500 mb-6 text-sm"},ue={class:"mb-3"},me=t("label",{for:"approves-loan",class:"block text-sm font-semibold leading-6 mb-5 text-gray-900"},"Should loans be approved?",-1),fe={class:"inline-flex relative items-center mr-5 cursor-pointer"},be=t("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"},null,-1),ge={class:"text-[#2C7075] ml-3"},he={class:"text-red-500 mb-6 text-sm"},xe={type:"submit",class:"inline-flex rounded-lg text-sm font-semibold py-2.5 px-4 text-sky-50 bg-teal-700 hover:text-sky-50/80 hover:bg-teal-600"},_e={key:1},ye=M({__name:"AddCompany",setup(E){const{createCompany:y}=N(),{pending:l,nonFieldErrors:v,fieldErrors:s,responseOK:C}=q(N()),{user:P}=q($()),a=i(""),f=i(""),d=i(0),c=i(0),g=i(""),h=i(!1),O=i(1),k=i(0),U=async()=>{const A=P.value.refresh_token,o={name:a.value,physical_address:f.value,max_loan_percent:d.value,number_of_employees:c.value,loan_period:g.value,approves_loan:h.value,status:O.value,profit_share_percent:k.value};await y(o,A),C.value&&D("/companies")};return i("Add Company"),(A,o)=>{const L=F;return w(),S("div",j,[t("p",H,r(e(v)),1),t("form",{onSubmit:R(U,["prevent"]),class:"w-full"},[t("div",G,[Q,p(t("input",{type:"text",id:"name","onUpdate:modelValue":o[0]||(o[0]=n=>u(a)?a.value=n:null),class:x([{"ring-1 ring-red-500 bg-red-50":e(_)(e(s),"Name")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200"]),required:""},null,2),[[b,e(a)]]),t("p",W,r(e(m)(e(s),"Name")),1)]),t("div",X,[Y,p(t("input",{type:"text",id:"physical-address",class:x([{"ring-1 ring-red-500 bg-red-50":e(_)(e(s),"PhysicalAddress")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"","onUpdate:modelValue":o[1]||(o[1]=n=>u(f)?f.value=n:null)},null,2),[[b,e(f)]]),t("p",Z,r(e(m)(e(s),"PhysicalAddress")),1)]),t("div",ee,[te,p(t("input",{type:"number",id:"number-of-employees",class:x([{"ring-1 ring-red-500 bg-red-50":e(_)(e(s),"NumberOfEmployees")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"",min:"1","onUpdate:modelValue":o[2]||(o[2]=n=>u(c)?c.value=n:null)},null,2),[[b,e(c)]]),t("p",se,r(e(m)(e(s),"NumberOfEmployees")),1)]),t("div",oe,[ae,p(t("input",{type:"number",id:"max-loan-percent",step:"0.01",min:"0",class:x([{"ring-1 ring-red-500 bg-red-50":e(_)(e(s),"MaxLoanPercent")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200"]),required:"","onUpdate:modelValue":o[3]||(o[3]=n=>u(d)?d.value=n:null)},null,2),[[b,e(d)]]),t("p",ne,r(e(m)(e(s),"MaxLoanPercent")),1)]),t("div",re,[le,p(t("input",{type:"number",id:"profit-share-percent",step:"0.01",min:"0",class:x([{"ring-1 ring-red-500 bg-red-50":e(_)(e(s),"ProfitSharePercent")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"","onUpdate:modelValue":o[4]||(o[4]=n=>u(k)?k.value=n:null)},null,2),[[b,e(k)]]),t("p",ie,r(e(m)(e(s),"ProfitSharePercent")),1)]),t("div",de,[ce,B(" "+r(e(g))+" ",1),p(t("input",{type:"range",id:"loan-period",min:"1",max:"28",class:"text-slate-900 rounded-md block w-full px-3 h-10 sm:text-sm focus:outline-none placeholder:text-slate-400","aria-required":"","onUpdate:modelValue":o[5]||(o[5]=n=>u(g)?g.value=n:null)},null,512),[[b,e(g)]]),t("p",pe,r(e(m)(e(s),"LoanPeriod")),1)]),t("div",ue,[me,t("label",fe,[p(t("input",{type:"checkbox",id:"approves-loan",class:"sr-only peer","onUpdate:modelValue":o[6]||(o[6]=n=>u(h)?h.value=n:null),required:""},null,512),[[T,e(h)]]),be,t("div",ge,r(e(h)),1)]),t("p",he,r(e(m)(e(s),"ApprovesLoan")),1)]),t("button",xe,[e(l)?(w(),V(L,{key:0})):(w(),S("span",_e,"Add Company"))])],40,J)])}}}),ve={};function ke(E,y){const l=ye;return w(),V(l)}const Ae=z(ve,[["render",ke]]);export{Ae as default};
