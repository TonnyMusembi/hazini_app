import{_ as A}from"./ThePermissions.vue.0ba3f5a7.js";import{_ as P}from"./Spin.c43bcd68.js";import{i as N,f as S,s as f,r as g,m as C,o as a,b as d,h as r,y as K,K as T,u as s,A as O,J as B,t as V,W as x,C as q,c as v,x as D,L as I,a as J}from"./entry.d9247041.js";import{a as $,u as M}from"./login.c95085de.js";import{a as y}from"./AddResourcesDialog.vue.fe5c3e02.js";import"./DialogComponent.vue.4a7fb94b.js";import"./use-event-listener.8ae17784.js";import"./use-resolve-button-type.8f768677.js";const b=N("create-role-store",{state:()=>({pending:!1,error:{hasError:!1,message:"",field:""},responseOK:!1}),actions:{async createRole(m,i){try{this.pending=!0;let e={hasError:!1,message:"",field:""};this.error=e;let n=!1;this.responseOK=n;const{data:p}=await $("/api/roles/create",{method:"post",body:{body:m,accessToken:i},async onResponse({request:o,response:t,options:u}){t.ok&&(n=!0)},async onResponseError({request:o,response:t,options:u}){t.status==400&&(e={hasError:!0,message:"permission or name not provided",field:"none"}),t.status===403&&(e={hasError:!0,message:"Role name already exists",field:"name"}),t.status===500&&(e={hasError:!0,message:"Internal server error",field:"none"})}},"$mDaJ6P7nJa");this.pending=!1,this.error=e,this.responseOK=n}catch{this.pending=!1}}}}),U={class:"shadow-md p-5 bg-white h-full overflow-scroll"},z=["onSubmit"],F={class:"mb-3"},L=r("label",{for:"name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Role Name",-1),W={key:0,class:"text-red-500 mb-6 text-sm"},j=r("h4",{class:"mt-4"},"Assign Permissions",-1),G={class:"border rounded-md mb-3 border-gray-200 h-[32rem] overflow-scroll"},H={key:1,class:"text-red-500 text-sm mb-3"},Q={type:"submit",class:"rounded-lg text-sm font-semibold py-2.5 px-4 text-sky-50 bg-teal-700 hover:text-sky-50/80 hover:bg-teal-600"},X={key:1},Y=S({__name:"AddRole",setup(m){const{createRole:i}=b(),{computedPermission:e}=f(y()),{unsetTogglePermissionsArray:n}=y(),{pending:p,error:o,responseOK:t}=f(b()),{user:u}=f(M()),l=g(""),_=g(!1),k=async()=>{if(e.value==null){_.value=!0;return}const h=u.value.refresh_token,c={name:l.value,permission:""+e.value};await i(c,h),t.value&&(n(),I("/permissions"))};return C(()=>{n()}),(h,c)=>{const R=A,w=P;return a(),d("div",U,[r("form",{onSubmit:D(k,["prevent"]),class:"w-full h-full overflow-auto"},[r("div",F,[L,K(r("input",{type:"text",id:"name","onUpdate:modelValue":c[0]||(c[0]=E=>O(l)?l.value=E:null),placeholder:"Enter role name",class:B(["appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200",{" bg-red-100":s(o).hasError&&s(o).field==="name"}]),required:""},null,2),[[T,s(l)]])]),s(o).hasError&&s(o).field==="name"?(a(),d("p",W,V(s(o).message),1)):x("",!0),j,r("div",G,[q(R)]),s(_)?(a(),d("div",H," No permission selected ")):x("",!0),r("button",Q,[s(p)?(a(),v(w,{key:0})):(a(),d("span",X,"Add Role"))])],40,z)])}}}),Z={};function ee(m,i){const e=Y;return a(),v(e)}const ce=J(Z,[["render",ee]]);export{ce as default};
