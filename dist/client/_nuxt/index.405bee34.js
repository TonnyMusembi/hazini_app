import{_ as R}from"./Spin.c43bcd68.js";import{_ as G,a as J}from"./DialogTitle.3caea66f.js";import{i as L,f as T,s as v,r as $,o as h,b as w,h as e,t as b,u as t,y as F,K as U,J as N,c as A,x as Q,F as O,D as B,C as _,E as X,H as le,A as re,B as ce,a as ie,G as de}from"./entry.d9247041.js";import{a as Y,u as z}from"./login.c95085de.js";import{f as q,g as K}from"./errors.1471274f.js";import{u as D,m as W,_ as Z,a as ee}from"./DialogComponent.vue.4a7fb94b.js";import{_ as ue}from"./PlusButton.fa1895e9.js";import"./use-event-listener.8ae17784.js";const H=L("branches-store",{state:()=>({selectedBranch:null}),actions:{setSelectedBranch(d){console.log(d),this.selectedBranch=d}}}),V=L("update-branch-store",{state:()=>({pending:!1,responseOK:!1,nonFieldErrors:"",fieldErrors:null,actionIsToDisable:!1}),actions:{async updateBranch(d,i,n){console.log(n);try{this.pending=!0;let r="",c=null,l=!1;this.responseOK=l;const{data:m}=await Y("/api/branch/update",{method:"put",body:{body:d,accessToken:i,branchID:n},async onResponse({request:a,response:s,options:o}){s.ok&&(l=!0),console.log(s)},async onResponseError({request:a,response:s,options:o}){var f,g,u;s.status==400&&(c=(f=s._data)==null?void 0:f.data.errors),s.status==401&&(r="Unauthorised"),s.status===403&&(r=(g=s._data)==null?void 0:g.data.error),s.status===404&&(r=(u=s._data)==null?void 0:u.data.error),s.status===500&&(r="Internal Error")}},"$BLASyum1b2");this.pending=!1,this.fieldErrors=c,this.nonFieldErrors=r,this.responseOK=l}catch{this.pending=!1}},setDisableAction(d){this.actionIsToDisable=d}}}),pe={class:"text-red-500 mb-6"},_e=["onSubmit"],he={class:"mb-3"},me=e("label",{for:"name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Company Name",-1),fe={class:"text-red-500 mb-6 text-sm"},ge={class:"mb-3"},be=e("label",{for:"name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Branch Name",-1),ye={class:"text-red-500 mb-6 text-sm"},xe={class:"mb-3"},ve=e("label",{for:"physical-address",class:"block text-sm font-semibold leading-6 text-gray-900"},"Physical Address",-1),ke={class:"text-red-500 mb-6 text-sm"},we={class:"mb-3"},Be=e("label",{for:"number-of-mployees",class:"block text-sm font-semibold leading-6 text-gray-900"},"Number of Employees",-1),De={class:"text-red-500 mb-6 text-sm"},$e={class:"flex justify-end"},Ee={type:"submit",class:"inline-flex rounded-lg text-sm font-semibold py-2.5 px-4 text-sky-50 bg-teal-700 hover:text-sky-50/80 hover:bg-teal-600"},Se={key:1},Ce=T({__name:"UpdateBranch",setup(d){const{updateBranch:i}=V(),{closeUpdateBranchDialog:n}=D(),{pending:r,nonFieldErrors:c,fieldErrors:l,responseOK:m}=v(V()),{user:a}=v(z()),{selectedBranch:s}=v(H());console.log(s.value);const o=$(s.value),f=async()=>{const g=a.value.refresh_token;console.log(o.value),await i(o.value,g,o.value.id),m.value&&n()};return(g,u)=>{const y=R;return h(),w(O,null,[e("p",pe,b(t(c)),1),e("form",{onSubmit:Q(f,["prevent"]),class:"w-full"},[e("div",he,[me,F(e("input",{type:"text",id:"name","onUpdate:modelValue":u[0]||(u[0]=k=>t(o).company_name=k),class:N([{"ring-1 ring-red-500 bg-red-50":t(q)(t(l),"Name")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200"]),required:""},null,2),[[U,t(o).company_name]]),e("p",fe,b(t(K)(t(l),"Name")),1)]),e("div",ge,[be,F(e("input",{type:"text",id:"name","onUpdate:modelValue":u[1]||(u[1]=k=>t(o).name=k),class:N([{"ring-1 ring-red-500 bg-red-50":t(q)(t(l),"Name")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200"]),required:""},null,2),[[U,t(o).name]]),e("p",ye,b(t(K)(t(l),"Name")),1)]),e("div",xe,[ve,F(e("input",{type:"text",id:"physical-address",class:N([{"ring-1 ring-red-500 bg-red-50":t(q)(t(l),"PhysicalAddress")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"","onUpdate:modelValue":u[2]||(u[2]=k=>t(o).physical_address=k)},null,2),[[U,t(o).physical_address]]),e("p",ke,b(t(K)(t(l),"PhysicalAddress")),1)]),e("div",we,[Be,F(e("input",{type:"number",id:"number-of-employees",disabled:"",class:N([{"ring-1 ring-red-500 bg-red-50":t(q)(t(l),"NumberOfEmployees")},"appearance-none cursor-not-allowed text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"",min:"1","onUpdate:modelValue":u[3]||(u[3]=k=>t(o).number_of_employees=k)},null,2),[[U,t(o).number_of_employees]]),e("p",De,b(t(K)(t(l),"NumberOfEmployees")),1)]),e("div",$e,[e("button",Ee,[t(r)?(h(),A(y,{key:0})):(h(),w("span",Se,"Update Branch"))])])],40,_e)],64)}}}),Fe={class:"w-full p-4 space-y-3"},Ue=e("p",{class:"text-sm text-gray-600"},null,-1),Ne=T({__name:"UpdateBranchDialog",props:{refreshBranches:{type:Function,required:!0}},setup(d){const{showUpdateBranchDialog:i}=v(D()),{closeUpdateBranchDialog:n}=D();return(r,c)=>{const l=G,m=J,a=Ce,s=Z,o=ee;return h(),A(t(W),{as:"template",show:t(i)},{default:B(()=>[_(o,{closeFunc:t(n)},{default:B(()=>[_(l,null,{default:B(()=>[X("Update Branch")]),_:1}),_(m),e("div",Fe,[_(a)]),_(s,null,{default:B(()=>[Ue]),_:1})]),_:1},8,["closeFunc"])]),_:1},8,["show"])}}}),P=L("disable-branch-store",{state:()=>({pending:!1,responseOK:!1,nonFieldErrors:"",fieldErrors:null}),actions:{async disableBranch(d,i){console.log(d);try{this.pending=!0;let n="",r=null,c=!1;this.responseOK=c;const{data:l}=await Y("/api/branch/update",{method:"put",body:{body:d,accessToken:i},async onResponse({request:m,response:a,options:s}){a.ok&&(c=!0)},async onResponseError({request:m,response:a,options:s}){var o,f,g;a.status==400&&(r=(o=a._data)==null?void 0:o.data.errors),a.status==401&&(n="Unauthorised"),a.status===403&&(n=(f=a._data)==null?void 0:f.data.error),a.status===404&&(n=(g=a._data)==null?void 0:g.data.error),a.status===500&&(n="Internal Error")}},"$wuQX75n1Tu");this.pending=!1,this.fieldErrors=r,this.nonFieldErrors=n,this.responseOK=c}catch{this.pending=!1}}}}),Te={class:"mx-auto"},Ae=e("p",{class:"flex justify-center text-xl"},"Are you sure!",-1),qe={class:"flex justify-end"},Ke={key:1},Oe=T({__name:"DisableBranch",setup(d){const{disableBranch:i}=P(),{actionIsToDisable:n}=v(V()),{closeDisableBranchDialog:r}=D(),{pending:c,responseOK:l}=v(P()),{user:m}=v(z()),{selectedBranch:a}=v(H()),s=$(a.value),o=async()=>{const f=m.value.refresh_token;n.value?s.value.status=0:s.value.status=1,console.log(s.value),await i(s.value,f),l.value&&r()};return(f,g)=>{const u=R;return h(),w("div",Te,[Ae,e("div",qe,[e("button",{onClick:o,class:"inline-flex rounded-lg text-sm font-semibold py-2.5 px-4 text-sky-50 bg-teal-700 hover:text-sky-50/80 hover:bg-teal-600"},[t(c)?(h(),A(u,{key:0})):(h(),w("span",Ke,"Confirm"))])])])}}}),Ve={class:"w-full p-4 space-y-3"},je=e("p",{class:"text-sm text-gray-600"},null,-1),Ie=T({__name:"DisableBranchDialog",props:{refreshBranches:{type:Function,required:!0}},setup(d){const{showDisableBranchDialog:i}=v(D()),{closeDisableBranchDialog:n}=D();return(r,c)=>{const l=G,m=J,a=Oe,s=Z,o=ee;return h(),A(t(W),{as:"template",show:t(i)},{default:B(()=>[_(o,{closeFunc:t(n)},{default:B(()=>[_(l,null,{default:B(()=>[X("Update Status")]),_:1}),_(m),e("div",Ve,[_(a)]),_(s,null,{default:B(()=>[je]),_:1})]),_:1},8,["closeFunc"])]),_:1},8,["show"])}}}),Me=e("div",{class:"flex justify-start text-xl"}," Branches ",-1),Re=e("br",null,null,-1),Le={class:"flex justify-end"},Ye=["onSubmit"],ze=e("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only"},"Search",-1),He={class:"relative"},Pe=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),Ge=e("button",{type:"submit",class:"text-white absolute right-2.5 bottom-2.5 bg-teal-700 hover:bg-teal-800 focus:ring-4 focus:outline-none focus:ring-teal-300 font-medium rounded-lg text-sm px-2 py-1"}," Search ",-1),Je=e("br",null,null,-1),Qe={key:1,class:"overflow-auto h-[35rem] relative shadow-md sm:rounded-lg"},Xe={class:"w-full text-sm text-left text-gray-500"},We=e("thead",{class:"text-xs text-gray-700 bg-gray-200"},[e("tr",{class:"divide-x divide-gray-300"},[e("th",{scope:"col",class:"py-3 px-6"}),e("th",{scope:"col",class:"py-3 px-6"},"Company Name"),e("th",{scope:"col",class:"py-3 px-6"},"Branch"),e("th",{scope:"col",class:"py-3 px-6"},"Address"),e("th",{scope:"col",class:"py-3 px-6"},"Employees"),e("th",{scope:"col",class:"py-3 px-6"},"Created.At"),e("th",{scope:"col",class:"py-3 px-6"},"Edit"),e("th",{scope:"col",class:"py-3 px-6"},"Enable/Disable")])],-1),Ze={class:"divide-y"},et={class:"py-4 px-6"},tt={class:"py-4 px-6"},st={class:"py-4 px-6"},ot={class:"py-4 px-6"},nt={class:"py-4 px-6"},at={class:"py-4 px-6"},lt={class:"py-4 px-6"},rt=["onClick"],ct=["onClick"],it={class:"inline-flex relative items-center mr-5 cursor-pointer"},dt=["checked"],ut=e("div",{class:"w-11 h-6 bg-gray-400 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-teal-600"},null,-1),pt=T({__name:"TheBranches",async setup(d){let i,n;const{user:r}=v(z());$("MM/DD/YYYY");const c=$(),l=$(),{openUpdateBranchDialog:m}=D(),{openDisableBranchDialog:a}=D(),{setSelectedBranch:s}=H(),{setDisableAction:o}=V();function f(p){var E=new Date(p),S=""+(E.getMonth()+1),C=""+E.getDate(),I=E.getFullYear();return S.length<2&&(S="0"+S),C.length<2&&(C="0"+C),[C,S,I].join("-")}const g=$(10),u=$(1),{data:y,pending:k,error:mt,refresh:j}=([i,n]=le(()=>Y("/api/branch/list",{query:{pageSize:g.value,pageID:u.value,accessToken:r.value.refresh_token}},"$GKJB35N76A")),i=await i,n(),i);j(),console.log(y.value);const te=p=>{console.log(p),s(p),m()},se=p=>{console.log(p),s(p),console.log("here"),p.status==1?o(!0):p.status==0&&o(!1),a()},oe=p=>{if(p===1)return!0;if(p===0)return!1},ne=()=>{if(y){if(y.value)y.value=y.value.filter(p=>p.name.toLowerCase().includes(c.value.toLowerCase()));else return y;console.log(l),console.log(y.value)}};return(p,E)=>{const S=R,C=Ne,I=Ie;return h(),w(O,null,[Me,Re,e("div",Le,[e("form",{class:"mb-3 w-1/3",onSubmit:Q(ne,["prevent"])},[ze,e("div",He,[Pe,F(e("input",{type:"search",id:"default-search",class:"block w-full p-3 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:outline-teal-700 focus:ring-teal-500 focus:border-0",placeholder:"Search branches...","onUpdate:modelValue":E[0]||(E[0]=x=>re(c)?c.value=x:null),required:""},null,512),[[U,t(c)]]),Ge])],40,Ye)]),Je,t(k)?(h(),A(S,{key:0,class:"h-20 w-20 text-teal-700"})):(h(),w("div",Qe,[e("table",Xe,[We,e("tbody",Ze,[(h(!0),w(O,null,ce(t(y),(x,M)=>(h(),w("tr",{key:M,class:N([{"bg-gray-50":M%2===1},"bg-white border-b divide-x hover:bg-teal-100 cursor-pointer"])},[e("td",et,b(M+1),1),e("td",tt,b(x.company_name),1),e("td",st,b(x.name),1),e("td",ot,b(x.physical_address),1),e("td",nt,b(x.number_of_employees),1),e("td",at,b(f(x.created_at)),1),e("td",lt,[e("a",{href:"#",onClick:ae=>te(x),class:"font-medium text-teal-700 hover:underline"},"Edit",8,rt)]),e("td",{class:"py-4 px-6",onClick:ae=>se(x)},[e("label",it,[e("input",{type:"checkbox",value:"",class:"sr-only peer",checked:oe(x.status)},null,8,dt),ut])],8,ct)],2))),128))])])])),_(C,{"refresh-branches":t(j)},null,8,["refresh-branches"]),_(I,{"refresh-branches":t(j)},null,8,["refresh-branches"])],64)}}}),_t={};function ht(d,i){const n=pt,r=ue,c=de;return h(),w(O,null,[_(n),_(c,{to:"/branches/add"},{default:B(()=>[_(r)]),_:1})],64)}const Bt=ie(_t,[["render",ht]]);export{Bt as default};
