import{u as V,a as I,_ as K,r as O}from"./AddResourcesDialog.vue.fe5c3e02.js";import{_ as U,a as W}from"./DialogTitle.3caea66f.js";import{_ as z}from"./Spin.c43bcd68.js";import{u as P,m as J,_ as L,a as Y}from"./DialogComponent.vue.4a7fb94b.js";import{f as H,s as l,r as h,o,c as F,D as v,C as _,u as s,E as p,h as e,t as A,x as Q,y as X,A as Z,J as G,K as ee,b as r,W as te,H as se,F as B,B as j}from"./entry.d9247041.js";import{u as M,a as oe}from"./login.c95085de.js";import{u as N}from"./update-role.47af15ac.js";function Ve(a){return a!=null&&a?a.filter(n=>n.status>0):[]}function He(a){return a!=null?a.filter(n=>n.status===0):[]}const ne={class:"w-full p-4 space-y-3"},re={class:"text-gray-600 space-y-2"},ae=e("p",null,[p(" Editing permissions is "),e("span",{class:"text-red-500"},"sensitive!")],-1),ie=e("p",null,[p(" We encourage you to be "),e("span",{class:"font-bold"},"careful"),p(" while doing it. ")],-1),le={class:"text-red-500"},ce=["onSubmit"],ue={class:"w-full"},de={key:0,class:"text-sm text-red-400 w-full"},_e={class:"flex justify-end w-full space-x-3 text-sm font-semibold"},pe=e("span",null,"Cancel",-1),fe=[pe],me={type:"submit",class:"flex cursor-pointer justify-center px-4 mt-4 bg-red-700 py-2 text-slate-50 uppercase tracking-wider rounded-md"},he={key:1},xe=e("p",{class:"text-sm text-gray-600"},null,-1),ge=H({__name:"EditPermissionDialog",setup(a){const{updateRole:n}=N(),{closeEditPermissionDialog:i}=P(),{user:b}=l(M()),{selectedRole:c,refreshRolesFunction:w,editIsToActivateRole:T}=l(V()),{showEditPermissionDialog:C}=l(P()),{pending:x,error:k,responseOK:$}=l(N()),E=h("sudo edit role"),u=h(""),d=h(!1),f=async()=>{if(u.value!=E.value){d.value=!0;return}const g=b.value.refresh_token,t=c.value.name,m=""+c.value.permission,R=c.value.id,D=T.value?1:0;await n({name:t,permission:m,status:D},g,R),w.value(),i()};return(g,t)=>{const m=U,R=W,D=z,S=L,q=Y;return o(),F(s(J),{as:"template",show:s(C)},{default:v(()=>[_(q,{closeFunc:s(i)},{default:v(()=>[_(m,null,{default:v(()=>[p("Edit Permissions")]),_:1}),_(R),e("div",ne,[e("div",re,[ae,ie,e("p",null,[p(" Type "),e("span",le,A(s(E)),1),p(" in the text box below and click the edit button. ")])]),e("form",{class:"",onSubmit:Q(f,["prevent"])},[e("div",ue,[X(e("input",{id:"confirmEdit",name:"confirmEdit",type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=y=>Z(u)?u.value=y:null),onInput:t[1]||(t[1]=y=>d.value=!1),class:G(["w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-teal-500 focus:bg-transparent focus:ring-2 focus:ring-teal-200 text-base outline-none text-gray-700 py-1 px-3 transition-colors duration-200 ease-in-out",{"border-red-300 bg-red-200 ring-red-200":s(d)}])},null,34),[[ee,s(u)]])]),s(d)?(o(),r("div",de," incorrect! ")):te("",!0),e("div",_e,[e("div",{onClick:t[2]||(t[2]=(...y)=>s(i)&&s(i)(...y)),class:"flex cursor-pointer justify-center px-4 bg-teal-400 mt-4 py-2 text-slate-50 uppercase tracking-wider rounded-md"},fe),e("button",me,[s(x)?(o(),F(D,{key:0,class:"text-slate-50"})):(o(),r("span",he,"Edit"))])])],40,ce)]),_(S,null,{default:v(()=>[xe]),_:1})]),_:1},8,["closeFunc"])]),_:1},8,["show"])}}}),ye={class:"shadow-md relative pb-5"},ve={class:"relative h-full overflow-auto"},be=e("div",{class:"flex justify-between w-full text-sm font-bold text-left text-gray-500 px-6 py-3 tracking-wide"},[e("div",{class:""},"Action"),e("div",{class:""},"Allowed")],-1),we={class:"px-6 text-xs py-3 text-gray-900 font-semibold"},ke={class:"bg-white py-3"},$e={class:"px-6 font-medium whitespace-nowrap"},Ee={class:"px-6"},Re={class:"relative inline-flex items-center cursor-pointer"},De=["checked"],Pe=e("div",{class:"w-9 h-4 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-teal-600"},null,-1),Ae={key:0,class:"ml-3 text-sm font-medium text-gray-900"},Te={key:1,class:"ml-3 text-sm font-medium text-gray-900"},Me=H({__name:"ThePermissionsByRole",async setup(a){let n,i;P();const{user:b}=l(M()),{selectedRole:c}=l(V());l(I()),I(),h(10),h(1);const{data:w,pending:T,error:C,refresh:x}=([n,i]=se(()=>oe("/api/resources/list",{query:{accessToken:b.value.refresh_token}},"$AGR4iby1P7")),n=await n,i(),n);x();const k=$=>c.value!=null?O(c.value,$):!1;return($,E)=>{const u=K,d=ge;return o(),r("div",ye,[e("div",ve,[be,(o(!0),r(B,null,j(s(w),(f,g)=>(o(),r("div",{key:f.resource_group_id,class:"w-full text-sm text-left text-gray-500 cursor-pointer"},[e("div",we,A(f.resource_group_name),1),e("div",ke,[(o(!0),r(B,null,j(f.resources,(t,m)=>(o(),r("div",{key:`${g}${m}`,class:"flex justify-between w-full hover:bg-teal-100"},[e("div",$e,A(t.resource_name),1),e("div",Ee,[e("label",Re,[e("input",{type:"checkbox",class:"sr-only peer",disabled:"",checked:k(t.permission)},null,8,De),Pe,k(t.permission)?(o(),r("span",Ae,"Yes")):(o(),r("span",Te,"No"))])])]))),128))])]))),128))]),_(u,{refreshPermission:s(x)},null,8,["refreshPermission"]),_(d)])}}});export{Me as _,He as a,Ve as f};
