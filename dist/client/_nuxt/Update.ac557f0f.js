import{_ as A}from"./ThePermissions.vue.0ba3f5a7.js";import{_ as N}from"./Spin.c43bcd68.js";import{f as B,s as l,H as I,r as v,X as V,o,b as c,h as s,y as W,K as D,u as e,A as $,J as q,t as z,W as g,C as F,c as y,x as J,L as K,a as M}from"./entry.d9247041.js";import{u as H,a as L}from"./login.c95085de.js";import{u as O,a as x}from"./AddResourcesDialog.vue.fe5c3e02.js";import{u as b}from"./update-role.47af15ac.js";import"./DialogComponent.vue.4a7fb94b.js";import"./use-event-listener.8ae17784.js";import"./use-resolve-button-type.8f768677.js";const X={class:"shadow-md p-5 bg-white h-full overflow-scroll"},Y=["onSubmit"],Z={class:"mb-3"},j=s("label",{for:"name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Role Name",-1),G={key:0,class:"text-red-500 mb-6 text-sm"},Q=s("h4",{class:"mt-4"},"Assign Permissions",-1),ee={class:"border rounded-md mb-3 border-gray-200 h-[32rem] overflow-scroll"},se={key:1,class:"text-red-500 text-sm mb-3"},oe={type:"submit",class:"rounded-lg text-sm font-semibold py-2.5 px-4 text-sky-50 bg-teal-700 hover:text-sky-50/80 hover:bg-teal-600"},te={key:1},re=B({__name:"UpdateRole",async setup(k){let t,n;const{updateRole:w,unsetError:R}=b(),{user:p}=l(H()),{selectedRole:m,refreshRolesFunction:ie,editIsToActivateRole:le}=l(O()),{computedPermission:_}=l(x()),{initializeTogglePermissionsArrayWithSomeItemsChecked:T}=x(),{data:S,pending:ce,error:me,refresh:de}=([t,n]=I(()=>L("/api/resources/list",{query:{accessToken:p.value.refresh_token}},"$oTYtWJZerW")),t=await t,n(),t);T(S.value,m.value);const f=v(!1),{pending:C,error:r,responseOK:E}=l(b()),a=v(m.value.name),P=async()=>{if(_.value==null){f.value=!0;return}const h=p.value.refresh_token,i=""+_.value,d=m.value.id,u={name:a.value,permission:i,status:1};await w(u,h,d),E.value&&K("/permissions")};return V(()=>{R()}),(h,i)=>{const d=A,u=N;return o(),c("div",X,[s("form",{onSubmit:J(P,["prevent"]),class:"w-full h-full overflow-auto"},[s("div",Z,[j,W(s("input",{type:"text",id:"name","onUpdate:modelValue":i[0]||(i[0]=U=>$(a)?a.value=U:null),placeholder:"Enter role name",class:q(["appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200",{" bg-red-100":e(r).hasError&&e(r).field==="name"}]),required:""},null,2),[[D,e(a)]])]),e(r).hasError&&e(r).field==="name"?(o(),c("p",G,z(e(r).message),1)):g("",!0),Q,s("div",ee,[F(d)]),e(f)?(o(),c("div",se," No permission selected ")):g("",!0),s("button",oe,[e(C)?(o(),y(u,{key:0})):(o(),c("span",te,"Update Role"))])],40,Y)])}}}),ne={};function ae(k,t){const n=re;return o(),y(n)}const ye=M(ne,[["render",ae]]);export{ye as default};
