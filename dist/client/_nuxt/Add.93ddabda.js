import{_ as U}from"./Spin.c43bcd68.js";import{i as V,f as R,s as N,H as L,r as l,o as d,b,h as s,x as M,y,I as $,u as e,A as x,J as v,F as O,B as z,t as i,K as S,c as q,L as H,a as J}from"./entry.d9247041.js";import{a as D,u as Z}from"./login.c95085de.js";import{f as k,g as w}from"./errors.1471274f.js";const I=V("create-branch-store",{state:()=>({pending:!1,responseOK:!1,nonFieldErrors:"",fieldErrors:null}),actions:{async createBranch(E,r){try{this.pending=!0;let n="",u=null,c=!1;this.responseOK=c;const{data:C}=await D("/api/branch/create",{method:"post",body:{body:E,accessToken:r},async onResponse({request:B,response:t,options:m}){t.ok&&(c=!0)},async onResponseError({request:B,response:t,options:m}){var p,A;t.status==400&&(u=(p=t._data)==null?void 0:p.data.errors),t.status==401&&(n="Unauthorised"),t.status===403&&(n=(A=t._data)==null?void 0:A.data.error),t.status===500&&(n="Internal Error")}},"$9wfrxeemxJ");this.pending=!1,this.fieldErrors=u,this.nonFieldErrors=n,this.responseOK=c}catch{this.pending=!1}}}}),j=s("div",{class:"flex items-start text-xl"}," Add Branch ",-1),G=s("br",null,null,-1),Q={class:"shadow-md p-5 bg-white"},W=["onSubmit"],X={class:"mb-3"},Y=s("label",{for:"company",class:"block text-sm font-semibold leading-6 text-gray-900"},"Select Company",-1),ee=["value"],se={class:"text-red-500 mb-6 text-sm"},te={class:"mb-3"},oe=s("label",{for:"name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Name",-1),ne={class:"text-red-500 mb-6 text-sm"},ae={class:"mb-3"},re=s("label",{for:"physical-address",class:"block text-sm font-semibold leading-6 text-gray-900"},"Physical Address",-1),le={class:"text-red-500 mb-6 text-sm"},ie={class:"mb-3"},de=s("label",{for:"number-of-mployees",class:"block text-sm font-semibold leading-6 text-gray-900"},"Number of Employees",-1),ce={class:"text-red-500 mb-6 text-sm"},ue={class:"text-red-500 mb-6"},me={type:"submit",class:"inline-flex rounded-lg text-sm font-semibold py-2.5 px-4 text-sky-50 bg-teal-700 hover:text-sky-50/80 hover:bg-teal-600"},pe={key:1},fe=R({__name:"AddBranch",async setup(E){let r,n;const{createBranch:u}=I(),{pending:c,responseOK:C,nonFieldErrors:B,fieldErrors:t}=N(I()),{user:m}=N(Z()),{data:p,pending:A,error:ge,refresh:be}=([r,n]=L(()=>D("/api/company/list",{query:{pageSize:10,pageID:1,accessToken:m.value.refresh_token}},"$pyZtxiPdLl")),r=await r,n(),r),f=l(""),h=l(""),_=l(0),K=l(1),g=l(0),P=async()=>{const F=m.value.refresh_token,a={name:f.value,physical_address:h.value,number_of_employees:_.value,status:K.value,company_id:g.value};await u(a,F),C.value&&H("/branches")};return l("Add Company"),(F,a)=>{const T=U;return d(),b(O,null,[j,G,s("div",Q,[s("form",{onSubmit:M(P,["prevent"]),class:"w-full"},[s("div",X,[Y,y(s("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>x(g)?g.value=o:null),id:"company",class:v([{"ring-1 ring-red-500 bg-red-50":e(k)(e(t),"CompanyID")},"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500"])},[(d(!0),b(O,null,z(e(p),o=>(d(),b("option",{value:o.id,key:o.id},i(o.name),9,ee))),128))],2),[[$,e(g)]]),s("p",se,i(e(w)(e(t),"CompanyID")),1)]),s("div",te,[oe,y(s("input",{type:"text",id:"name","onUpdate:modelValue":a[1]||(a[1]=o=>x(f)?f.value=o:null),class:v([{"ring-1 ring-red-500 bg-red-50":e(k)(e(t),"Name")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 ring-1 ring-slate-200"]),required:""},null,2),[[S,e(f)]]),s("p",ne,i(e(w)(e(t),"Name")),1)]),s("div",ae,[re,y(s("input",{type:"text",id:"physical-address",class:v([{"ring-1 ring-red-500 bg-red-50":e(k)(e(t),"PhysicalAddress")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"","onUpdate:modelValue":a[2]||(a[2]=o=>x(h)?h.value=o:null)},null,2),[[S,e(h)]]),s("p",le,i(e(w)(e(t),"PhysicalAddress")),1)]),s("div",ie,[de,y(s("input",{type:"number",id:"number-of-employees",class:v([{"ring-1 ring-red-500 bg-red-50":e(k)(e(t),"NumberOfEmployees")},"appearance-none text-slate-900 bg-gray-50 rounded-md block w-full px-3 h-10 shadow-sm sm:text-sm focus:outline-none placeholder:text-slate-400 focus:ring-2 focus:ring-sky-500 focus:bg-white ring-1 ring-slate-200"]),"aria-required":"","onUpdate:modelValue":a[3]||(a[3]=o=>x(_)?_.value=o:null)},null,2),[[S,e(_)]]),s("p",ce,i(e(w)(e(t),"NumberOfEmployees")),1)]),s("p",ue,i(e(B)),1),s("button",me,[e(c)?(d(),q(T,{key:0})):(d(),b("span",pe,"Add Branch"))])],40,W)])],64)}}}),he={};function _e(E,r){const n=fe;return d(),q(n)}const we=J(he,[["render",_e]]);export{we as default};
