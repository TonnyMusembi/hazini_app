import{u as B,a as g,_ as S}from"./AddResourcesDialog.vue.fe5c3e02.js";import{f as F,s as f,r as y,H as I,o as s,b as t,h as e,F as v,B as x,t as w,u as b,C as N}from"./entry.d9247041.js";import{u as R,a as j}from"./login.c95085de.js";const D={class:"shadow-md relative pb-5"},V={class:"relative h-full overflow-auto"},q=e("div",{class:"flex justify-between w-full text-sm font-bold text-left text-gray-500 px-6 py-3 tracking-wide"},[e("div",{class:""},"Action"),e("div",{class:""},"Allowed")],-1),E={class:"text-xs text-gray-800"},H={colspan:"2",scope:"col",class:"px-6 py-3 text-gray-900 font-semibold"},L={class:"bg-white py-3"},Y={class:"px-6 font-medium whitespace-nowrap"},z={class:"px-6"},J={class:"relative inline-flex items-center cursor-pointer"},K=["onChange","checked"],M=e("div",{class:"w-9 h-4 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-teal-600"},null,-1),O={key:0,class:"ml-3 text-sm font-medium text-gray-900"},Q={key:1,class:"ml-3 text-sm font-medium text-gray-900"},te=F({__name:"ThePermissions",async setup(U){let i,_;const{user:k}=f(R());f(B());const{togglePermissionsArray:P,hasPermission:m}=f(g()),{setTogglePermissionsArray:$,togglePermission:A,setTogglePermissionPayload:C}=g();y(10),y(1);const{data:u,pending:W,error:X,refresh:p}=([i,_]=I(()=>j("/api/resources/list",{query:{accessToken:k.value.refresh_token}},"$fe6gf1yb3w")),i=await i,_(),i);p();const h=(l,c)=>{const o=parseInt(`${l}${c}`);return m.value(o)},T=(l,c,o)=>{let r=parseInt(`${l}${c}`);!P.value.length&&u.value.length&&$(u.value);const a=!m.value(r,o);C({index:r,permissionIsChecked:a,permission:o}),A()};return(l,c)=>{const o=S;return s(),t("div",D,[e("div",V,[q,(s(!0),t(v,null,x(b(u),(r,a)=>(s(),t("div",{key:r.resource_group_id,class:"w-full text-sm text-left text-gray-500 cursor-pointer"},[e("div",E,[e("div",null,[e("div",H,w(r.resource_group_name),1)])]),e("div",L,[(s(!0),t(v,null,x(r.resources,(n,d)=>(s(),t("div",{key:`${a}${d}`,class:"flex justify-between w-full hover:bg-teal-100"},[e("div",Y,w(n.resource_name),1),e("div",z,[e("label",J,[e("input",{onChange:Z=>T(a,d,n.permission),type:"checkbox",value:"",class:"sr-only peer",checked:h(a,d,n.permission)},null,40,K),M,h(a,d,n.permission)?(s(),t("span",O,"Yes")):(s(),t("span",Q,"No"))])])]))),128))])]))),128))]),N(o,{refreshPermission:b(p)},null,8,["refreshPermission"])])}}});export{te as _};
